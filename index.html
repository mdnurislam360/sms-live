<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Live</title>

<style>

/* ======================
   Base
====================== */
html,body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    background:#0f172a;
    font-family:sans-serif;
}

#root{
    width:100vw;
    height:100vh;
    position:relative;
}

/* ======================
   ‚ùå Remove Zego default text
====================== */
.zego-uikit-empty-view,
.zego-uikit-empty-text,
.zego-uikit-placeholder{
    display:none !important;
}

/* ======================
   üëÅ Mini Viewer Counter
====================== */
#coin-system{
    position:absolute;
    top:6px;
    right:6px;
    display:flex;
    align-items:center;
    gap:6px;
    padding:4px 8px;
    background:rgba(0,0,0,.6);
    border-radius:16px;
    color:#fff;
    z-index:9999;
}

/* üî• 4x smaller eye */
.eye-container{
    width:8px;
    height:5px;
    background:#fff;
    border-radius:100% 0%;
    transform:rotate(45deg);
    position:relative;
    overflow:hidden;
}

.iris{
    width:3px;
    height:3px;
    background:#29B6F6;
    border-radius:50%;
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) rotate(-45deg);
}

.pupil{
    width:1.5px;
    height:1.5px;
    background:#000;
    border-radius:50%;
    margin:auto;
}

/* üî• number double size */
#coin-count{
    font-size:20px;
    font-weight:bold;
}

</style>
</head>

<body>

<div id="root"></div>

<!-- üëÅ Counter -->
<div id="coin-system">
    <div class="eye-container">
        <div class="iris">
            <div class="pupil"></div>
        </div>
    </div>
    <span id="coin-count">0</span>
</div>


<script src="https://unpkg.com/@zegocloud/zego-uikit-prebuilt/zego-uikit-prebuilt.js"></script>

<script>

/* ======================
   Zego Setup
====================== */

const roomID = "room1";
const userID = "user_" + Math.floor(Math.random()*10000);
const userName = "User" + userID;

const appID = 480055648;
const serverSecret = "a341f27a11c9af1547c670c09b6df111";

const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(
    appID, serverSecret, roomID, userID, userName
);

const role = ZegoUIKitPrebuilt.Host;

const zp = ZegoUIKitPrebuilt.create(kitToken);

zp.joinRoom({
    container: document.querySelector("#root"),
    showPreJoinView:false,
    scenario:{
        mode:ZegoUIKitPrebuilt.LiveStreaming,
        config:{role}
    },
    onLiveStart:()=>{
        startViewerSystem();
    }
});


/* ======================
   Smart Viewer System
====================== */

let viewers = 0;
const label = document.getElementById("coin-count");

function updateViewer(){
    label.innerText = viewers;
}

function startViewerSystem(){

    // 10s ‚Üí +1
    setTimeout(()=>{
        viewers += 1;
        updateViewer();
    },10000);

    // 30s ‚Üí +2
    setTimeout(()=>{
        viewers += 2;
        updateViewer();
    },30000);

    // 60s ‚Üí +3
    setTimeout(()=>{
        viewers += 3;
        updateViewer();

        // then every 60s ‚Üí +1
        setInterval(()=>{
            viewers += 1;
            updateViewer();
        },60000);

    },60000);
}

</script>

</body>
</html>

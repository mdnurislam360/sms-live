<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>HE Live</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #0f172a;
            font-family: Arial, sans-serif;
        }

        /* Zego container full screen */
        #root {
            width: 100vw;
            height: 100vh;
        }

        /* =========================
           âœ¨ Top Right Floating Icon
        ========================== */
        #aiBtn {
            position: fixed;
            top: 20px;
            right: 20px;

            width: 55px;
            height: 55px;

            background: white;
            border-radius: 50%;

            display: flex;
            align-items: center;
            justify-content: center;

            font-size: 26px;
            cursor: pointer;

            box-shadow: 0 4px 12px rgba(0,0,0,0.5);

            z-index: 9999;
        }

        #aiBtn:active {
            transform: scale(0.95);
        }
    </style>
</head>


<body>

    <!-- Zego Live View -->
    <div id="root"></div>

    <!-- âœ¨ Floating Button -->
    <div id="aiBtn">âœ¨</div>


    <!-- Zego SDK -->
    <script src="https://unpkg.com/@zegocloud/zego-uikit-prebuilt/zego-uikit-prebuilt.js"></script>

    <script>

        /* =========================
           Get URL Params
        ========================== */
        function getUrlParams(url) {
            let urlStr = url.split('?')[1];
            const urlSearchParams = new URLSearchParams(urlStr);
            return Object.fromEntries(urlSearchParams.entries());
        }

        /* =========================
           ðŸ”¥ YOUR ZEGO INFO
        ========================== */
        const appID = 480055648;
        const serverSecret = "a341f27a11c9af1547c670c09b6df111";
        /* ========================= */


        const urlParams = getUrlParams(window.location.href);

        const roomID = urlParams.roomID || "HE_LIVE_ROOM";
        const userID = "user_" + Math.floor(Math.random() * 10000);
        const userName = "HE_User_" + userID;

        const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(
            appID,
            serverSecret,
            roomID,
            userID,
            userName
        );

        // Host / Audience role
        let role = urlParams.role || "Host";
        role = role === "Host"
            ? ZegoUIKitPrebuilt.Host
            : ZegoUIKitPrebuilt.Audience;

        const zp = ZegoUIKitPrebuilt.create(kitToken);

        zp.joinRoom({

            container: document.querySelector("#root"),

            /* âœ… Hide PreJoin */
            showPreJoinView: false,

            /* UI Options */
            maxUsers: 20,
            layout: "Auto",

            showTextChat: true,
            showUserList: true,
            showRoomTimer: true,
            showScreenSharingButton: true,

            turnOnCameraWhenJoining: true,
            turnOnMicrophoneWhenJoining: true,

            scenario: {
                mode: ZegoUIKitPrebuilt.LiveStreaming,
                config: {
                    role: role,
                },
            },

            sharedLinks: [{
                name: "Join as Audience",
                url:
                    window.location.protocol + "//" +
                    window.location.host +
                    window.location.pathname +
                    "?roomID=" + roomID +
                    "&role=Audience",
            }],

            onJoinRoom: () => console.log("Joined"),
            onLeaveRoom: () => console.log("Left")

        });


        /* =========================
           âœ¨ Floating Button Click
        ========================== */
        document.getElementById("aiBtn").onclick = function () {
            alert("HE Live AI Button Clicked ðŸ˜„");
        };

    </script>

</body>

</html>

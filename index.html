<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>HE Live Pro - Modified</title>
    <script src="https://unpkg.com/@zegocloud/zego-uikit-prebuilt/zego-uikit-prebuilt.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background: black;
            color: white;
        }
        #root { width: 100vw; height: 100vh; }

        /* Floating Buttons */
        .fab {
            position: fixed;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            z-index: 10000;
            box-shadow: 0 6px 15px rgba(0,0,0,0.6);
            transition: transform 0.2s;
        }
        .fab:hover { transform: scale(1.1); }

        #aiBtn    { top: 20px; right: 20px; background: #ffffff; color: #000; }
        #giftBtn  { bottom: 100px; right: 20px; background: #ff3366; color: white; }
        #followBtn{ bottom: 180px; right: 20px; background: #00cc66; color: white; }

        /* Coin Box */
        #coinBox {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.65);
            backdrop-filter: blur(8px);
            color: #ffd700;
            padding: 10px 18px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            z-index: 10000;
            border: 1px solid #ffd70044;
        }

        /* Gift Animation */
        #giftAnimation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 120px;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            transition: all 1.2s ease-out;
        }
        .gift-fly {
            animation: flyUp 1.5s forwards;
        }
        @keyframes flyUp {
            0%   { opacity: 0; transform: translate(-50%, 100px) scale(0.5); }
            20%  { opacity: 1; transform: translate(-50%, -20px) scale(1.3); }
            100% { opacity: 0; transform: translate(-50%, -300px) scale(1.8); }
        }

        /* Bottom Bar */
        #bottomBar {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 70px;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        #liveBtn {
            background: #ff0000;
            color: white;
            padding: 14px 50px;
            border-radius: 50px;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 0 20px #ff000088;
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <!-- Coin Display -->
    <div id="coinBox">ü™ô 1000</div>

    <!-- Floating Buttons -->
    <div id="aiBtn"    class="fab">‚ú®</div>
    <div id="giftBtn"  class="fab">üéÅ</div>
    <div id="followBtn" class="fab"> follow ‚ù§Ô∏è</div>

    <!-- Gift Animation Layer -->
    <div id="giftAnimation"></div>

    <!-- Bottom Bar -->
    <div id="bottomBar">
        <div id="liveBtn">üî¥ LIVE</div>
    </div>

<script>
    // ================= ZEGO CONFIG =================
    const appID = 480055648;
    const serverSecret = "a341f27a11c9af1547c670c09b6df111";
    const roomID = "HE_LIVE_ROOM_" + Date.now(); // unique room each time (optional)
    const userID = "user_" + Math.floor(Math.random() * 100000);
    const userName = "HE_User";

    const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(
        appID, serverSecret, roomID, userID, userName
    );

    const zp = ZegoUIKitPrebuilt.create(kitToken);

    zp.joinRoom({
        container: document.querySelector("#root"),
        showPreJoinView: false,
        scenario: {
            mode: ZegoUIKitPrebuilt.LiveStreaming,
            config: { role: ZegoUIKitPrebuilt.Host }
        },
        showTextChat: true,
        showUserList: true,
        showScreenSharingButton: true,
        // chat ‡¶è ‡¶ó‡¶ø‡¶´‡¶ü ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø notification ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º
        onIMMessageReceived: (msgs) => {
            // ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡¶§‡ßá ‡¶ó‡¶ø‡¶´‡¶ü ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá
        }
    });

    // ================= COIN + GIFT SYSTEM =================
    let coins = 1000;
    const coinBox = document.getElementById("coinBox");
    const giftAnim = document.getElementById("giftAnimation");

    function updateCoins() {
        coinBox.innerHTML = `ü™ô ${coins}`;
    }

    // Simple gift types
    const gifts = [
        { name: "Rose", emoji: "üåπ", cost: 50 },
        { name: "Heart", emoji: "‚ù§Ô∏è", cost: 100 },
        { name: "Rocket", emoji: "üöÄ", cost: 300 },
        { name: "Crown", emoji: "üëë", cost: 800 }
    ];

    // Gift button click ‚Üí show simple selection (‡¶è‡¶ñ‡¶æ‡¶®‡ßá alert ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá, ‡¶™‡¶∞‡ßá modal ‡¶¨‡¶æ‡¶®‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßã)
    document.getElementById("giftBtn").onclick = () => {
        // ‡¶∏‡¶ø‡¶Æ‡ßç‡¶™‡¶≤ prompt ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ó‡¶ø‡¶´‡¶ü ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü (real app ‡¶è modal/UI ‡¶¨‡¶æ‡¶®‡¶æ‡¶¨‡ßá)
        const choice = prompt("Select gift:\n1. Rose (50)\n2. Heart (100)\n3. Rocket (300)\n4. Crown (800)\nEnter number:", "2");

        if (!choice) return;
        const index = parseInt(choice) - 1;
        if (index < 0 || index >= gifts.length) {
            alert("Invalid choice!");
            return;
        }

        const selectedGift = gifts[index];

        if (coins >= selectedGift.cost) {
            coins -= selectedGift.cost;
            updateCoins();

            // Send to chat (Zego IM ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá)
            zp.sendCustomMessage({
                type: "gift",
                data: {
                    giftName: selectedGift.name,
                    emoji: selectedGift.emoji,
                    sender: userName
                }
            }).then(() => {
                // Animation
                giftAnim.innerHTML = selectedGift.emoji;
                giftAnim.classList.add("gift-fly");
                setTimeout(() => {
                    giftAnim.classList.remove("gift-fly");
                    giftAnim.innerHTML = "";
                }, 1500);

                alert(`üéÅ \( {selectedGift.name} sent! - \){selectedGift.cost} coins`);
            });
        } else {
            alert("‚ùå Not enough coins! Need " + selectedGift.cost);
        }
    };

    // Follow button
    document.getElementById("followBtn").onclick = () => {
        alert("‚ù§Ô∏è You followed the Host!");
    };

    // AI button (future)
    document.getElementById("aiBtn").onclick = () => {
        alert("‚ú® AI Assistant Coming Soon...");
    };

    // Live button
    document.getElementById("liveBtn").onclick = () => {
        alert("üî¥ You are LIVE now!");
    };

    updateCoins(); // initial
</script>
</body>
</html>

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>HE Live Room</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #000;
        }

        #root {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>

<body>

    <div id="root"></div>

    <!-- ZegoCloud SDK -->
    <script src="https://unpkg.com/@zegocloud/zego-uikit-prebuilt/zego-uikit-prebuilt.js"></script>

    <script>
        function getUrlParams(url) {
            let urlStr = url.split('?')[1];
            const urlSearchParams = new URLSearchParams(urlStr);
            return Object.fromEntries(urlSearchParams.entries());
        }

        // ==============================
        // ðŸ”¥ YOUR ZEGO INFO
        // ==============================

        const appID = 480055648;
        const serverSecret = "a341f27a11c9af1547c670c09b6df111";

        // ==============================

        const urlParams = getUrlParams(window.location.href);

        const roomID = urlParams.roomID || "HE_LIVE_ROOM_01";

        const userID = "user_" + Math.floor(Math.random() * 10000);
        const userName = "HE_User_" + userID;

        const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(
            appID,
            serverSecret,
            roomID,
            userID,
            userName
        );

        // Host / Audience
        let role = urlParams.role || 'Host';
        role = role === 'Host'
            ? ZegoUIKitPrebuilt.Host
            : ZegoUIKitPrebuilt.Audience;

        const zp = ZegoUIKitPrebuilt.create(kitToken);

        zp.joinRoom({
            container: document.querySelector("#root"),

            // âœ… Hide PreJoin Page (à¦¤à§‹à¦®à¦¾à¦° request)
            showPreJoinView: false,

            maxUsers: 20,
            layout: "Auto",

            showTextChat: true,
            showUserList: true,
            showRoomTimer: true,
            showScreenSharingButton: true,
            showMyCameraToggleButton: true,
            showMyMicrophoneToggleButton: true,

            turnOnCameraWhenJoining: true,
            turnOnMicrophoneWhenJoining: true,

            scenario: {
                mode: ZegoUIKitPrebuilt.LiveStreaming,
                config: {
                    role: role,
                },
            },

            sharedLinks: [{
                name: "Join as Audience",
                url:
                    window.location.protocol + "//" +
                    window.location.host +
                    window.location.pathname +
                    "?roomID=" + roomID +
                    "&role=Audience",
            }],

            branding: {
                logoURL: ""
            },

            onJoinRoom: () => {
                console.log("Joined Room");
            },

            onLeaveRoom: () => {
                console.log("Left Room");
            }
        });

    </script>

</body>

</html>
